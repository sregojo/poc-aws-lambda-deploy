{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "A sample template",
	"Resources": {
		"buildartifactstorage": {
			"Type": "AWS::S3::Bucket",
			"Properties": 
			{
				"AccessControl" : "Private",
				"BucketName" : "ms-build-artifacts",
			}
		},
		"buildrole": {
			"Type": "AWS::CodeBuild::Project",
			"Properties": {}
		},
		"buildrolepolicy": {
			"Type": "AWS::CodeBuild::Project",
			"Properties": {}
		},
		"buildproject": {
			"Type": "AWS::CodeBuild::Project",
			"Properties": {}
		},
		"Build": {
			"Type": "AWS::CodeBuild::Project",
			"Properties": {
				"Name": "myProjectName",
				"Description": "A description about my project",
				"ServiceRole": {
					"Fn::GetAtt": ["ServiceRole", "Arn"]
				},
				"Artifacts": {
					"Type": "no_artifacts"
				},
				"Environment": {
					"Type": "LINUX_CONTAINER",
					"ComputeType": "BUILD_GENERAL1_SMALL",
					"Image": "aws/codebuild/java:openjdk-8",
					"EnvironmentVariables": [{
							"Name": "varName",
							"Value": "varValue"
						}
					]
				},
				"Source": {
					"Location": "codebuild-demo-test/0123ab9a371ebf0187b0fe5614fbb72c",
					"Type": "S3"
				},
				"TimeoutInMinutes": 10,
				"Tags": [{
						"Key": "Key1",
						"Value": "Value1"
					}, {
						"Key": "Key2",
						"Value": "Value2"
					}
				]
			}
		}
	}
}





C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)
λ aws iam create-role --role-name microservice-build-role --assume-role-policy-document file://microservice-build-role.json
{
    "Role": {
        "AssumeRolePolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Action": "sts:AssumeRole",
                    "Effect": "Allow",
                    "Principal": {
                        "Service": "codebuild.amazonaws.com"
                    }
                }
            ]
        },
        "RoleId": "AROAIBIPYP4SRPF7O6G5Y",
        "CreateDate": "2018-04-08T21:48:20.017Z",
        "RoleName": "microservice-build-role",
        "Path": "/",
        "Arn": "arn:aws:iam::924772764137:role/microservice-build-role"
    }
}

C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)
λ aws iam put-role-policy --role-name microservice-build-role --policy-name microservice-build-role-policy --policy-document file://microservice-build-role-policy.json

C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)
λ aws codebuild create-project --cli-input-json file://microservice-build-definition.json
{
    "project": {
        "name": "microservice-build",
        "serviceRole": "arn:aws:iam::924772764137:role/microservice-build-role",
        "created": 1523224109.087,
        "artifacts": {
            "namespaceType": "NONE",
            "packaging": "NONE",
            "type": "S3",
            "location": "ms-builds",
            "name": "microservice-artifacts"
        },
        "lastModified": 1523224109.087,
        "timeoutInMinutes": 60,
        "environment": {
            "computeType": "BUILD_GENERAL1_SMALL",
            "privilegedMode": true,
            "image": "aws/codebuild/dot-net:core-2.0",
            "type": "LINUX_CONTAINER",
            "environmentVariables": []
        },
        "source": {
            "buildspec": "build/aws/codebuild/buildspec.yml",
            "type": "GITHUB",
            "location": "https://github.com/sregojo/poc-aws-lambda-deploy.git",
            "auth": {
                "type": "OAUTH"
            }
        },
        "encryptionKey": "arn:aws:kms:us-east-1:924772764137:alias/aws/s3",
        "arn": "arn:aws:codebuild:us-east-1:924772764137:project/microservice-build"
    }
}

C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)
λ cls















                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 
λ aws iam create-role --role-name microservice-build-role --assume-role-policy-document file://microservice-build-role.json                                                                          λ aws iam create-role --role-name microservice-build-role --assume-role-policy-document file://microservice-build-role.json                                                                          λ aws iam create-role --role-name microservice-build-role --assume-role-policy-document file://microservice-build-role.json                                                                          
{                                                                                                                                                                                                    {                                                                                                                                                                                                    {                                                                                                                                                                                                    
    "Role": {                                                                                                                                                                                            "Role": {                                                                                                                                                                                            "Role": {                                                                                                                                                                                        
        "AssumeRolePolicyDocument": {                                                                                                                                                                        "AssumeRolePolicyDocument": {                                                                                                                                                                        "AssumeRolePolicyDocument": {                                                                                                                                                                
            "Version": "2012-10-17",                                                                                                                                                                             "Version": "2012-10-17",                                                                                                                                                                             "Version": "2012-10-17",                                                                                                                                                                 
            "Statement": [                                                                                                                                                                                       "Statement": [                                                                                                                                                                                       "Statement": [                                                                                                                                                                           
                {                                                                                                                                                                                                    {                                                                                                                                                                                                    {                                                                                                                                                                                    
                    "Action": "sts:AssumeRole",                                                                                                                                                                          "Action": "sts:AssumeRole",                                                                                                                                                                          "Action": "sts:AssumeRole",                                                                                                                                                      
                    "Effect": "Allow",                                                                                                                                                                                   "Effect": "Allow",                                                                                                                                                                                   "Effect": "Allow",                                                                                                                                                               
                    "Principal": {                                                                                                                                                                                       "Principal": {                                                                                                                                                                                       "Principal": {                                                                                                                                                                   
                        "Service": "codebuild.amazonaws.com"                                                                                                                                                                 "Service": "codebuild.amazonaws.com"                                                                                                                                                                 "Service": "codebuild.amazonaws.com"                                                                                                                                         
                    }                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                
                }                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                    
            ]                                                                                                                                                                                                    ]                                                                                                                                                                                                    ]                                                                                                                                                                                        
        },                                                                                                                                                                                                   },                                                                                                                                                                                                   },                                                                                                                                                                                           
        "RoleId": "AROAIBIPYP4SRPF7O6G5Y",                                                                                                                                                                   "RoleId": "AROAIBIPYP4SRPF7O6G5Y",                                                                                                                                                                   "RoleId": "AROAIBIPYP4SRPF7O6G5Y",                                                                                                                                                           
        "CreateDate": "2018-04-08T21:48:20.017Z",                                                                                                                                                            "CreateDate": "2018-04-08T21:48:20.017Z",                                                                                                                                                            "CreateDate": "2018-04-08T21:48:20.017Z",                                                                                                                                                    
        "RoleName": "microservice-build-role",                                                                                                                                                               "RoleName": "microservice-build-role",                                                                                                                                                               "RoleName": "microservice-build-role",                                                                                                                                                       
        "Path": "/",                                                                                                                                                                                         "Path": "/",                                                                                                                                                                                         "Path": "/",                                                                                                                                                                                 
        "Arn": "arn:aws:iam::924772764137:role/microservice-build-role"                                                                                                                                      "Arn": "arn:aws:iam::924772764137:role/microservice-build-role"                                                                                                                                      "Arn": "arn:aws:iam::924772764137:role/microservice-build-role"                                                                                                                              
    }                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                                
}                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 
λ aws iam put-role-policy --role-name microservice-build-role --policy-name microservice-build-role-policy --policy-document file://microservice-build-role-policy.json                              λ aws iam put-role-policy --role-name microservice-build-role --policy-name microservice-build-role-policy --policy-document file://microservice-build-role-policy.json                              λ aws iam put-role-policy --role-name microservice-build-role --policy-name microservice-build-role-policy --policy-document file://microservice-build-role-policy.json                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 
λ aws codebuild create-project --cli-input-json file://microservice-build-definition.json                                                                                                            λ aws codebuild create-project --cli-input-json file://microservice-build-definition.json                                                                                                            λ aws codebuild create-project --cli-input-json file://microservice-build-definition.json                                                                                                            
{                                                                                                                                                                                                    {                                                                                                                                                                                                    {                                                                                                                                                                                                    
    "project": {                                                                                                                                                                                         "project": {                                                                                                                                                                                         "project": {                                                                                                                                                                                     
        "name": "microservice-build",                                                                                                                                                                        "name": "microservice-build",                                                                                                                                                                        "name": "microservice-build",                                                                                                                                                                
        "serviceRole": "arn:aws:iam::924772764137:role/microservice-build-role",                                                                                                                             "serviceRole": "arn:aws:iam::924772764137:role/microservice-build-role",                                                                                                                             "serviceRole": "arn:aws:iam::924772764137:role/microservice-build-role",                                                                                                                     
        "created": 1523224109.087,                                                                                                                                                                           "created": 1523224109.087,                                                                                                                                                                           "created": 1523224109.087,                                                                                                                                                                   
        "artifacts": {                                                                                                                                                                                       "artifacts": {                                                                                                                                                                                       "artifacts": {                                                                                                                                                                               
            "namespaceType": "NONE",                                                                                                                                                                             "namespaceType": "NONE",                                                                                                                                                                             "namespaceType": "NONE",                                                                                                                                                                 
            "packaging": "NONE",                                                                                                                                                                                 "packaging": "NONE",                                                                                                                                                                                 "packaging": "NONE",                                                                                                                                                                     
            "type": "S3",                                                                                                                                                                                        "type": "S3",                                                                                                                                                                                        "type": "S3",                                                                                                                                                                            
            "location": "ms-builds",                                                                                                                                                                             "location": "ms-builds",                                                                                                                                                                             "location": "ms-builds",                                                                                                                                                                 
            "name": "microservice-artifacts"                                                                                                                                                                     "name": "microservice-artifacts"                                                                                                                                                                     "name": "microservice-artifacts"                                                                                                                                                         
        },                                                                                                                                                                                                   },                                                                                                                                                                                                   },                                                                                                                                                                                           
        "lastModified": 1523224109.087,                                                                                                                                                                      "lastModified": 1523224109.087,                                                                                                                                                                      "lastModified": 1523224109.087,                                                                                                                                                              
        "timeoutInMinutes": 60,                                                                                                                                                                              "timeoutInMinutes": 60,                                                                                                                                                                              "timeoutInMinutes": 60,                                                                                                                                                                      
        "environment": {                                                                                                                                                                                     "environment": {                                                                                                                                                                                     "environment": {                                                                                                                                                                             
            "computeType": "BUILD_GENERAL1_SMALL",                                                                                                                                                               "computeType": "BUILD_GENERAL1_SMALL",                                                                                                                                                               "computeType": "BUILD_GENERAL1_SMALL",                                                                                                                                                   
            "privilegedMode": true,                                                                                                                                                                              "privilegedMode": true,                                                                                                                                                                              "privilegedMode": true,                                                                                                                                                                  
            "image": "aws/codebuild/dot-net:core-2.0",                                                                                                                                                           "image": "aws/codebuild/dot-net:core-2.0",                                                                                                                                                           "image": "aws/codebuild/dot-net:core-2.0",                                                                                                                                               
            "type": "LINUX_CONTAINER",                                                                                                                                                                           "type": "LINUX_CONTAINER",                                                                                                                                                                           "type": "LINUX_CONTAINER",                                                                                                                                                               
            "environmentVariables": []                                                                                                                                                                           "environmentVariables": []                                                                                                                                                                           "environmentVariables": []                                                                                                                                                               
        },                                                                                                                                                                                                   },                                                                                                                                                                                                   },                                                                                                                                                                                           
        "source": {                                                                                                                                                                                          "source": {                                                                                                                                                                                          "source": {                                                                                                                                                                                  
            "buildspec": "build/aws/codebuild/buildspec.yml",                                                                                                                                                    "buildspec": "build/aws/codebuild/buildspec.yml",                                                                                                                                                    "buildspec": "build/aws/codebuild/buildspec.yml",                                                                                                                                        
            "type": "GITHUB",                                                                                                                                                                                    "type": "GITHUB",                                                                                                                                                                                    "type": "GITHUB",                                                                                                                                                                        
            "location": "https://github.com/sregojo/poc-aws-lambda-deploy.git",                                                                                                                                  "location": "https://github.com/sregojo/poc-aws-lambda-deploy.git",                                                                                                                                  "location": "https://github.com/sregojo/poc-aws-lambda-deploy.git",                                                                                                                      
            "auth": {                                                                                                                                                                                            "auth": {                                                                                                                                                                                            "auth": {                                                                                                                                                                                
                "type": "OAUTH"                                                                                                                                                                                      "type": "OAUTH"                                                                                                                                                                                      "type": "OAUTH"                                                                                                                                                                      
            }                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                        
        },                                                                                                                                                                                                   },                                                                                                                                                                                                   },                                                                                                                                                                                           
        "encryptionKey": "arn:aws:kms:us-east-1:924772764137:alias/aws/s3",                                                                                                                                  "encryptionKey": "arn:aws:kms:us-east-1:924772764137:alias/aws/s3",                                                                                                                                  "encryptionKey": "arn:aws:kms:us-east-1:924772764137:alias/aws/s3",                                                                                                                          
        "arn": "arn:aws:codebuild:us-east-1:924772764137:project/microservice-build"                                                                                                                         "arn": "arn:aws:codebuild:us-east-1:924772764137:project/microservice-build"                                                                                                                         "arn": "arn:aws:codebuild:us-east-1:924772764137:project/microservice-build"                                                                                                                 
    }                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                                
}                                                                                                                                                                                                    }                                                                                                                                                                                                    }                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 C:\Users\santiago.regojo\Desktop\personal\src\AWS\poc-aws-lambda-deploy\build\aws\codebuild (master)                                                                                                 
λ cls                                                                                                                                                                                                λ cls                                                                                                                                                                                                λ cls                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               