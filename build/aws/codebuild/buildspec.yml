version: 0.2
env:
  parameter-store:
    BUILD_PROJECT: "microservice.api.rest"
phases:
  install:
    commands:
      - apt-get install -y zip
  pre_build:
    commands:
      - dotnet --info --version
  build:
    commands:
      - dotnet build src/$BUILD_PROJECT
  post_build:
    commands:
      - mkdir artifacts
      - dotnet publish src/$BUILD_PROJECT --output publish
      - zip artifacts/$BUILD_PROJECT.zip src/$BUILD_PROJECT/publish
artifacts:
  files:
    - artifacts/$BUILD_PROJECT.zip