version: 0.2

phases:
  install:
    commands:
      - apt-get install -y zip
  pre_build:
    commands:
      - echo Building source version $CODEBUILD_SOURCE_VERSION
      - dotnet --info --version
  build:
    commands:
      - cd src/microservice.api.rest
      - dotnet publish
  post_build:
    commands:
      - echo Current path
      - pwd
      - zip -r build/artifacts/microservice.api.rest.zip src/microservice.api.rest/bin/Debug/netcoreapp2.0/publish
artifacts:
  files:
    - build/artifacts/microservice.api.rest.zip